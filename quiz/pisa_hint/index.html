<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ æ¬¡ã®å ´æ‰€ã¯ï¼Ÿ ğŸ—¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Hiragino Sans', 'Meiryo', sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .card {
            background: white;
            border-radius: 25px;
            padding: 35px 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            text-align: center;
            max-width: 360px;
            width: 100%;
        }
        
        .icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        
        h1 {
            color: #1565c0;
            font-size: 1.4em;
            margin-bottom: 20px;
        }
        
        .step {
            display: none;
        }
        
        .step.active {
            display: block;
        }
        
        .question-box {
            background: #fff8e1;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            text-align: left;
            line-height: 1.8;
            border-left: 5px solid #ffb300;
        }
        
        .question-box p {
            font-size: 1.1em;
            color: #333;
        }
        
        .keyword {
            color: #d32f2f;
            font-weight: bold;
        }
        
        .input-area {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        input[type="text"] {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1em;
            outline: none;
        }
        
        input[type="text"]:focus {
            border-color: #1565c0;
        }
        
        button {
            padding: 12px 20px;
            background: #1565c0;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #0d47a1;
        }
        
        .error {
            color: #d32f2f;
            font-size: 0.9em;
            margin-top: 10px;
            display: none;
        }
        
        .success {
            background: #e8f5e9;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            color: #2e7d32;
            font-weight: bold;
        }
        
        .final-box {
            background: #e8f5e9;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .final-box p {
            font-size: 1.2em;
            color: #2e7d32;
            font-weight: bold;
            line-height: 1.7;
        }
        
        .treasure {
            background: #fce4ec;
            border-radius: 15px;
            padding: 18px;
            margin-bottom: 15px;
            border: 2px dashed #e91e63;
        }
        
        .treasure p {
            font-size: 1.1em;
            color: #c2185b;
            font-weight: bold;
            line-height: 1.7;
        }
        
        .keywords {
            background: #f5f5f5;
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .keywords-title {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }
        
        .tag {
            display: inline-block;
            background: #e3f2fd;
            color: #1565c0;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            margin: 3px;
        }
        
        .apple {
            display: inline-block;
            animation: fall 2s ease-in-out infinite;
        }
        
        @keyframes fall {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(8px); }
        }
        
        .tower {
            display: inline-block;
            transform: rotate(5deg);
        }
        
        .hint {
            color: #888;
            font-size: 0.85em;
            margin-top: 10px;
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .back-btn {
            background: #78909c;
            padding: 10px 18px;
            font-size: 0.9em;
        }
        
        .back-btn:hover {
            background: #546e7a;
        }
        
        .reset-btn {
            background: #ef5350;
            padding: 10px 18px;
            font-size: 0.9em;
        }
        
        .reset-btn:hover {
            background: #d32f2f;
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="icon"><span class="apple">ğŸ</span> â†’ <span class="tower">ğŸ—¼</span></div>
        <h1>æ¬¡ã®å ´æ‰€ã‚’ã•ãŒãã†ï¼</h1>
        
        <!-- Step 1: ãƒªãƒ³ã‚´ã®ç­”ãˆ -->
        <div class="step active" id="step1">
            <div class="question-box">
                <p>ğŸ æœ€åˆã®ä¾‹é¡Œã®ç­”ãˆã¯<br>ãªã‚“ã ã£ãŸã‹ãªï¼Ÿ</p>
            </div>
            <div class="input-area">
                <input type="text" id="answer1" placeholder="ã²ã‚‰ãŒãªã§å…¥åŠ›">
                <button onclick="checkAnswer1()">OK</button>
            </div>
            <p class="error" id="error1">âŒ ã¡ãŒã†ã‚ˆã€ã‚‚ã†ä¸€åº¦ï¼</p>
        </div>
        
        <!-- Step 2: ãƒ”ã‚µã®ç­”ãˆ -->
        <div class="step" id="step2">
            <div class="success">âœ… æ­£è§£ï¼ãƒªãƒ³ã‚´ã ã­ğŸ</div>
            <div class="question-box">
                <p>ğŸ ãƒªãƒ³ã‚´ãŒ<span class="keyword">è½ã¡ãŸ</span>ã“ã¨ã§<br>
                ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³ã¯å¼•åŠ›ã‚’ç™ºè¦‹ã—ãŸã€‚</p>
                <p>ã§ã‚‚ã€Œã‚‚ã®ãŒ<span class="keyword">è½ã¡ã‚‹</span>ã€å®Ÿé¨“ã‚’<br>
                ã‚‚ã£ã¨æ˜”ã«ã‚„ã£ãŸäººãŒã„ã‚‹ã‚ˆã€‚</p>
                <p>ãã®äººãŒå®Ÿé¨“ã—ãŸ<br>
                ã€Œã‹ãŸã‚€ã„ãŸå¡”ã€ã®åå‰ã¯ï¼Ÿ</p>
            </div>
            <div class="input-area">
                <input type="text" id="answer2" placeholder="â—‹â—‹ã®æ–œå¡”">
                <button onclick="checkAnswer2()">OK</button>
            </div>
            <p class="error" id="error2">âŒ ã¡ãŒã†ã‚ˆã€ã‚‚ã†ä¸€åº¦ï¼</p>
            <div class="keywords">
                <p class="keywords-title">ğŸ”‘ ãƒ’ãƒ³ãƒˆ</p>
                <span class="tag">ã‚¬ãƒªãƒ¬ã‚ª</span>
                <span class="tag">ã‚¤ã‚¿ãƒªã‚¢</span>
                <span class="tag">è½ä¸‹å®Ÿé¨“</span>
            </div>
            <div class="nav-buttons">
                <button class="back-btn" onclick="goBack(2, 1)">â† æˆ»ã‚‹</button>
            </div>
        </div>
        
        <!-- Final: å ´æ‰€ã®æ¡ˆå†… -->
        <div class="step" id="step3">
            <div class="success">âœ… æ­£è§£ï¼ãƒ”ã‚µã®æ–œå¡”ğŸ—¼</div>
            <div class="final-box">
                <p>ğŸ“š <span class="keyword">2éš</span>ã®<br>ã€Œ<span class="keyword">çŸ¥è­˜ãŒçœ ã‚‹æ£š</span>ã€ã¸è¡Œã“ã†ï¼</p>
            </div>
            <div class="treasure">
                <p>ğŸ” ã€Œ<span class="keyword">ãƒ”ã‚µã®æ–œå¡”</span>ã€ã®çµµãŒã‚ã‚‹<br>ãŠå®ç®±ã‚’ã•ãŒã—ã¦ã­ï¼</p>
            </div>
            <p class="hint">ğŸ“– æœ¬ã®ä¸­ã«ä½•ã‹ã‚ã‚‹ã‹ã‚‚...ï¼Ÿ</p>
            <div class="nav-buttons">
                <button class="back-btn" onclick="goBack(3, 2)">â† æˆ»ã‚‹</button>
                <button class="reset-btn" onclick="resetAll()">ğŸ”„ æœ€åˆã‹ã‚‰</button>
            </div>
        </div>
    </div>
    
    <script>
        // ã‚«ã‚¿ã‚«ãƒŠã‚’ã²ã‚‰ãŒãªã«å¤‰æ›
        function kataToHira(str) {
            return str.replace(/[\u30A1-\u30F6]/g, function(match) {
                return String.fromCharCode(match.charCodeAt(0) - 0x60);
            });
        }
        
        // æ­£è¦åŒ–ï¼ˆå°æ–‡å­—ã€ã²ã‚‰ãŒãªçµ±ä¸€ï¼‰
        function normalize(str) {
            return kataToHira(str.trim().toLowerCase());
        }
        
        function checkAnswer1() {
            const answer = normalize(document.getElementById('answer1').value);
            
            if (answer === 'ã‚Šã‚“ã”' || answer === 'ringo' || answer === 'apple' || answer === 'æ—æª') {
                document.getElementById('step1').classList.remove('active');
                document.getElementById('step2').classList.add('active');
            } else {
                document.getElementById('error1').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('error1').style.display = 'none';
                }, 2000);
            }
        }
        
        function checkAnswer2() {
            const answer = normalize(document.getElementById('answer2').value);
            
            if (answer === 'ã´ã•' || answer === 'pisa' || 
                answer === 'ã´ã•ã®ã—ã‚ƒã¨ã†' || answer === 'ã´ã•ã®æ–œå¡”') {
                document.getElementById('step2').classList.remove('active');
                document.getElementById('step3').classList.add('active');
            } else {
                document.getElementById('error2').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('error2').style.display = 'none';
                }, 2000);
            }
        }
        
        function goBack(fromStep, toStep) {
            document.getElementById('step' + fromStep).classList.remove('active');
            document.getElementById('step' + toStep).classList.add('active');
        }
        
        function resetAll() {
            document.getElementById('step2').classList.remove('active');
            document.getElementById('step3').classList.remove('active');
            document.getElementById('step1').classList.add('active');
            document.getElementById('answer1').value = '';
            document.getElementById('answer2').value = '';
        }
        
        // Enterã‚­ãƒ¼ã§é€ä¿¡
        document.getElementById('answer1').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') checkAnswer1();
        });
        document.getElementById('answer2').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') checkAnswer2();
        });
    </script>
</body>
</html>
